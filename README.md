# Compiler_Design

The parser.py file uses the os, re and sys standard python modules. In addition to these, the file also requires graphviz and the anytree library be installed. The program can be run from the command line using `python parser.py filename`. The program will write Error or Success messages to parser.log and will write the grammar generated to grammar.txt if it encounters no errors before grammar generation.

### Installing Graphviz
To install graphviz for Windows, go to https://graphviz.gitlab.io and select Stable 2.38 Windows install packages. Select graphviz-2.38.msi and run the installation. Set the path variable to the location of the graphviz binary on your machine (the default is C:\Program Files (x86)\Graphviz2.38\bin) and restart your machine.

After installing graphviz, the anytree package can be installed using the command `pip install anytree`.

The parser.py file will accept a file as a command line argument for example `python parser.py filename`.

The grammar for a formula is written to the grammar.txt file and any errors from parsing or grammar generation are stored in parser.log along with the result of the parsing. The parse tree for a given file is stored as a.png file with a name in the form filename.png.

## Error Checking

The program will write to parser.log and exit the first error it finds in the input file.

When the file is read, the input must be of the form Type : options. If a second colon is present, an error will be written to the log file e.g. `Error: multiple colons found in line of input file`

If Parsing fails, an error will be writtem to the log file, stating the position in the formula and the name of the character where parsing fails e.g. `Syntax Error: \land at position 29 could not be parsed`

During grammar generation, the input is verified before the grammar is generated. The program checks if variables, constants or predicates contain any invalid characters (not underscores, numbers or letters) and writes an error to the log file if it does e.g. `Error: constant <C can only contain letters, numbers and underscores`. Connectives and equality are checked similarly but connectives are also allowed to contain a backslash and equality is also allowed to contain a backslash and an equals sign.

Checks are also made to ensure that predicates, constants, variables, equality and connectives do not share the same names e.g. `Error: variables and equality share the following names : {'w'}`

The program ensures that predicates contain square brackets and that the value inside the square brackets is an integer.

If the input contains a valid formula as a prefix in its formula but the entire input formula is not valid, an error will be written to the log file. This error will be of the form `Error: Additional characters found at the end of formula that were not matched in parsing`.

## Valid Formula

If the formula is valid, the program will write the formula to the log file. For the formula `\forall x ( \exists y ( P ( x , y ) \implies \neg Q ( x ) ) \lor \exists z ( ( ( C = z ) \land Q ( z ) ) \land P ( x , z ) ) )`, the program will write `Success: The Formula: \forall x ( \exists y ( P ( x , y ) \implies \neg Q ( x ) ) \lor \exists z ( ( ( C = z ) \land Q ( z ) ) \land P ( x , z ) ) ) is valid` to the log file.

## Grammar File
The Grammar for each input will be in the following format (generated by example1.txt):

Grammar For filename
Non Terminal Symbols: <Start> <Quantifier> <Predicate> <Equality> <Constant> <Variable> <Connective> <Terminal> <Bracketed>

Terminal Symbols: == AND OR IMPLIES IFF NOT price cost1 30 Z E A Same Non_zero notEqual ( ) ,

Production Rules:\s\s
<Start> -> <Predicate>|(<Bracketed>|<Quantifier><Variable><Start>|NOT<Start> \s \s
<Bracketed> -> <Start><Connective><Start>)|<Terminal><Equality><Terminal>) \s \s
<Equality> -> == \s \s
<Terminal> -> <Constant>, <Variable> \s \s
<Quantifier> -> E|A \s \s
<Variable> -> price|cost1 \s \s
<Constant> -> 30|Z \s \s
<Predicate> -> Same(<Variable>,<Variable>)|Non_zero(<Variable>)|notEqual(<Variable>,<Variable>,<Variable>) \s \s
<Connective> -> AND|OR|IMPLIES|IFF \s \s
Grammar For file.txt \s \s
Non Terminal Symbols: <Start> <Quantifier> <Predicate> <Equality> <Constant> <Variable> <Connective> <Terminal> <Bracketed> \s \s


## Log File
The log file will be in the following format for each input (generated by example2.txt):

filename-Log: \s \s
Error: predicate &P can only contain letters, numbers and underscores
